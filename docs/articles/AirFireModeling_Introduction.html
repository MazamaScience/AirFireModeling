<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to AirFireModeling • AirFireModeling</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to AirFireModeling">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AirFireModeling</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.13</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/AirFireModeling_Introduction.html">Introduction to AirFireModeling</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="AirFireModeling_Introduction_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="AirFireModeling_Introduction_files/jquery-1.12.4/jquery.min.js"></script><link href="AirFireModeling_Introduction_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="AirFireModeling_Introduction_files/leaflet-1.3.1/leaflet.js"></script><link href="AirFireModeling_Introduction_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="AirFireModeling_Introduction_files/Proj4Leaflet-1.0.1/proj4-compressed.js"></script><script src="AirFireModeling_Introduction_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="AirFireModeling_Introduction_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="AirFireModeling_Introduction_files/leaflet-binding-2.0.3/leaflet.js"></script><script src="AirFireModeling_Introduction_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="AirFireModeling_Introduction_files/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to AirFireModeling</h1>
                        <h4 class="author">Mazama Science</h4>
            
            <h4 class="date">2020-04-02</h4>
      
      
      <div class="hidden name"><code>AirFireModeling_Introduction.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The USFS Pacific Wildland Fire Sciences Lab AirFire team works to model wildland fire emissions and has created the BlueSky Modeling Framework. This system integrates a wide collection of models along the smoke modeling chain (fire information, fuel loadings, consumption modeling, emissions modeling, time rate of emissions modeling, plume height estimations, and smoke trajectory and dispersion modeling). The <em>AirFireModeling</em> package was created to make it easy to ingest and manipulate BluesSky model data in <em>R</em>. When combined with the <em>PWFSLSmoke</em> and <em>MazamaSpatialUtils</em> packages, this allowing direct comparison of model and regulatory monitoring data.</p>
<p>This article is meant to introduce <em>AirFireModeling</em> basic functionality, concepts, and terminology, and is not meant to be an exhaustive tutorial. The most important aspect of this package is its embrace of the incredibly full featured <em>raster</em> package which allows simple, mathematical style manipulation of <code>Raster*</code> objects (multi-dimensional gridded data bricks).</p>
<p>For more information on working with <code>Raster*</code> objects please see:</p>
<ul>
<li><a href="https://rspatial.org/raster/index.html">Spatial Data Science with R</a></li>
<li><a href="https://oscarperpinan.github.io/rastervis/">RasterVis</a></li>
</ul>
</div>
<div id="preparation" class="section level2">
<h2 class="hasAnchor">
<a href="#preparation" class="anchor"></a>Preparation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(PWFSLSmoke)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(AirFireModeling)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># Spatial utils are required by the raster_toMonitor() function</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MazamaSpatialUtils)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">PWFSLSmoke<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/PWFSLSmoke/man/initializeMazamaSpatialUtils.html">initializeMazamaSpatialUtils</a></span>()</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co"># Set the directory to download to and load models from</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="kw"><a href="../reference/setModelDataDir.html">setModelDataDir</a></span>(<span class="st">'~/Data/BlueSky'</span>)</a></code></pre></div>
</div>
<div id="loading-bluesky-models" class="section level2">
<h2 class="hasAnchor">
<a href="#loading-bluesky-models" class="anchor"></a>Loading BlueSky models</h2>
<p>The <em>AirFireModeling</em> package offers consistent and flexible model loading functions. The <code><a href="../reference/bluesky_load.html">bluesky_load()</a></code> function can be used to load data from a single model run. The return type will be a <code>RasterBrick</code> which can then be manipulated with the <em>raster</em> package.</p>
<p>The <code><a href="../reference/raster_load.html">raster_load()</a></code> function can be used to load output from multiple models and/or model initialization times at once. This function returns a list of <code>RasterBrick</code> objects.</p>
<p>Data are obtained from the data archive on <code>haze.airfire.org</code>. The very first time data is requested it is first downloaded to the directory specified with <code><a href="../reference/setModelDataDir.html">setModelDataDir()</a></code> and then converted from the original NetCDF format into a <code>v2</code> format that follows <a href="http://cfconventions.org">CF conventions</a>. This allows the <em>raster</em> package to work with data in “delayed evaluation” mode, vastly improving performance.</p>
<p>All future times data is requested, it will be found in the <code>modelDataDir</code>, and immediately available.</p>
<p>Also note that the <em>raster</em> package allows us to only load data from the region of interest. Although full datasets are initially downloaded and converted, data loaded into memory will include only those grid cells that lie with the boundary set by <code>xlim</code> and <code>ylim</code> parameters in the <code>~_load()</code> functions.</p>
<p>Below is an example of loading a model using the two functions:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Single model and modelRun</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">raster &lt;-<span class="st"> </span><span class="kw"><a href="../reference/raster_load.html">raster_load</a></span>(</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="dt">model =</span> <span class="st">'PNW-1.33km'</span>, </a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="dt">modelRun =</span> <span class="dv">20200325</span>,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">125</span>, <span class="dv">-115</span>),</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">42</span>, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co"># Multiple models at once</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">rasterList &lt;-<span class="st"> </span><span class="kw"><a href="../reference/raster_load.html">raster_load</a></span>(</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">  <span class="dt">model =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'PNW-1.33km'</span>, <span class="st">'PNW-4km'</span>), </a>
<a class="sourceLine" id="cb2-12" data-line-number="12">  <span class="dt">modelRun =</span> <span class="dv">20200325</span>,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">  <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">125</span>, <span class="dv">-115</span>),</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">  <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">42</span>, <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">)</a></code></pre></div>
</div>
<div id="raster-data-types" class="section level2">
<h2 class="hasAnchor">
<a href="#raster-data-types" class="anchor"></a>Raster data types</h2>
<p>When model is loaded, it takes the object type <code>Raster*</code>. Because BlueSky models are temporal in nature, each model has multiple <em>layers</em> (time slices) of gridded values, organized along a time axis. In the <em>AirFireModeling</em> package, each slice is called a <code>RasterLayer</code> object, or layer for short. Multiple layers together, such as when model runs are loaded, are called <code>RasterBrick</code> objects, or brick. Accessing a layer in a brick is effectively accessing a model-slice at a certain time. For example, to access the eleventh hour in an hourly updated model may look something like this: <code>model[[11]]</code>.</p>
</div>
<div id="maps" class="section level2">
<h2 class="hasAnchor">
<a href="#maps" class="anchor"></a>Maps</h2>
<p>Mapping is easy with the <em>AirFireModeling</em> <code><a href="../reference/raster_map.html">raster_map()</a></code> function. The <code>raster</code> object passed in can be either a single <code>RasterBrick</code> or a list of them.</p>
<div id="single-map" class="section level3">
<h3 class="hasAnchor">
<a href="#single-map" class="anchor"></a>Single Map</h3>
<p>A single map will be plotted for a single model.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Create a map from a RasterBrick</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="../reference/raster_map.html">raster_map</a></span>(</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  raster, </a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="dt">index =</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">)</a></code></pre></div>
<p><img src="AirFireModeling_Introduction_files/figure-html/raster_map-1.png" width="672"></p>
</div>
<div id="multiple-maps" class="section level3">
<h3 class="hasAnchor">
<a href="#multiple-maps" class="anchor"></a>Multiple Maps</h3>
<p>A batch map will be plotted for a batch model.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Create a map from a list of RasterBricks</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw"><a href="../reference/raster_map.html">raster_map</a></span>(</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  rasterList, </a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  <span class="dt">index =</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">)</a></code></pre></div>
<p><img src="AirFireModeling_Introduction_files/figure-html/raster_map_2-1.png" width="672"></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Could plot a single one with</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#raster_map(</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#  rasterList[[1]],</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#  index = 7</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#)</span></a></code></pre></div>
<!-- ### Models and Monitors -->
<!-- Much of the functionality of the package is aimed at BlueSky model output with  -->
<!-- regulatory monitoring data. There are a couple of ways to quickly do so in  -->
<!-- *AirFireModeling* that require little knowledge of other packages and databases.  -->
<!-- Just by knowing a monitor ID that is within a BlueSky coordinate domain, we can load and compare the two traces produced by the model and regulatory monitor.  -->
<!-- We can find monitor ID's through a number of methods, but the easiest is to visit [The AirFire tools monitoring site](https://tools.airfire.org/monitoring/v4/).  -->
<!-- Here is how we can easily compare a monitor to our models. -->
<!-- ```{r} -->
<!-- raster_coordinateTrace(rasterList, monitorID = '530330057_01') -->
<!-- ``` -->
</div>
</div>
<div id="working-with-monitoring-data" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-monitoring-data" class="anchor"></a>Working with monitoring data</h2>
<p><code>Raster*</code> objects are inherently spatial (and temporal) whereas regulatory monitors loaded via the <em>PWFSLSmoke</em> R package are primarily temporal. In order to compare a BlueSky model with monitoring data we must be able to convert between the two world views.</p>
<p>To help with this, the package has both <code><a href="../reference/raster_toMonitor.html">raster_toMonitor()</a></code> and <code><a href="../reference/monitor_toRaster.html">monitor_toRaster()</a></code> functions which allow conversion from model data to <em>PWFSLSmoke</em> <code>ws_monitor</code> objects and back again.</p>
<div id="raster-to-monitor" class="section level3">
<h3 class="hasAnchor">
<a href="#raster-to-monitor" class="anchor"></a>Raster to Monitor</h3>
<p>The <code><a href="../reference/raster_toMonitor.html">raster_toMonitor()</a></code> function allows users to specify a longitude, latitude and radius and convert all model grid cells within that radius into <em>PWFSLSmoke</em>-compatible <em>ws_monitor</em> objects. These can then be used with any functions from the <em>PWFSLSmoke</em> or <em>AirMonitorPlots</em> packages.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">model_Portland &lt;-<span class="st"> </span><span class="kw"><a href="../reference/raster_toMonitor.html">raster_toMonitor</a></span>(</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  rasterList,</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="dt">longitude =</span> <span class="fl">-122.68</span>,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="dt">latitude =</span> <span class="fl">45.52</span>,</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="dt">count =</span> <span class="dv">15</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">PWFSLSmoke<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/PWFSLSmoke/man/monitor_timeseriesPlot.html">monitor_timeseriesPlot</a></span>(</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">  model_Portland[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb6-10" data-line-number="10"> <span class="dt">type =</span> <span class="st">'l'</span>, <span class="dt">col =</span> <span class="st">'salmon'</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">)</a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="kw"><a href="https://rdrr.io/r/graphics/title.html">title</a></span>(<span class="st">"15 Grid cells near Portland"</span>)</a></code></pre></div>
<p><img src="AirFireModeling_Introduction_files/figure-html/raster_toMonitor-1.png" width="672"></p>
<p>Converting model data to <em>ws_monitor</em> objects makes it easy to compare model and monitor data in the <em>timeseries</em> domain.</p>
</div>
<div id="monitor-to-raster" class="section level3">
<h3 class="hasAnchor">
<a href="#monitor-to-raster" class="anchor"></a>Monitor to Raster</h3>
<p>The <code><a href="../reference/monitor_toRaster.html">monitor_toRaster()</a></code> function accepts a <em>ws_monitor</em> object and a Raster* object defining the grid. Grid cells where monitors exist are loaded with monitor values while all others cells are filled with <code>NA</code> values. The returned raster can then be mainuplated with other functions in the raster package.</p>
<p>Having monitor values defined on a specifc model grid also makes it easier to perform mathematical comparisons of model and monitor data in the <em>spatial</em> domain.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># All PWFSLSmoke monitors within 20 km of Portland, OR</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">Portland_monitors &lt;-</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/PWFSLSmoke/man/monitor_load.html">monitor_load</a></span>(</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">    <span class="dt">startdate =</span> <span class="dv">2019100900</span>,</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">    <span class="dt">enddate =</span> <span class="dv">2019101123</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/PWFSLSmoke/man/monitor_subsetByDistance.html">monitor_subsetByDistance</a></span>(</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">    <span class="dt">longitude =</span> <span class="fl">-122.68</span>,</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">    <span class="dt">latitude =</span> <span class="fl">45.52</span>,</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">    <span class="dt">radius =</span> <span class="dv">20</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11">  )</a>
<a class="sourceLine" id="cb7-12" data-line-number="12"></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co"># Create a Portland area RasterBrick</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15">rasterList &lt;-<span class="st"> </span><span class="kw"><a href="../reference/raster_load.html">raster_load</a></span>(</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">  <span class="dt">model =</span> <span class="st">"PNW-4km"</span>,</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">  <span class="dt">modelRun =</span> <span class="dv">2019100900</span>,</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">  <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="fl">123.08</span>, <span class="fl">-122.28</span>),</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">  <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">45.22</span>, <span class="fl">45.92</span>)</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">)</a>
<a class="sourceLine" id="cb7-21" data-line-number="21"></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co"># Put monitor data on raster grid</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23">Portland_rasterBrick &lt;-</a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="st">  </span><span class="kw"><a href="../reference/monitor_toRaster.html">monitor_toRaster</a></span>(</a>
<a class="sourceLine" id="cb7-25" data-line-number="25">    Portland_monitors,</a>
<a class="sourceLine" id="cb7-26" data-line-number="26">    rasterList[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb7-27" data-line-number="27">  )</a>
<a class="sourceLine" id="cb7-28" data-line-number="28"></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co"># Leaflet map of monitors</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30">PWFSLSmoke<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/PWFSLSmoke/man/monitor_leaflet.html">monitor_leaflet</a></span>(</a>
<a class="sourceLine" id="cb7-31" data-line-number="31">  <span class="dt">ws_monitor =</span> Portland_monitors</a>
<a class="sourceLine" id="cb7-32" data-line-number="32">)</a></code></pre></div>
<div id="htmlwidget-8595b04377d28ae41d85" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-8595b04377d28ae41d85">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[45.52126,-122.701635],10,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[45.39916,45.496641,45.4702,45.64336],[-122.7455,-122.602877,-122.8159,-122.58737],10,null,null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#FFFF00","#FFFF00","#00E400","#FFFF00"],"fillOpacity":0.7},null,null,["siteName: Portland Near Road<br>monitorID: 410670005_01<br>elevation: NA<br>pm25: 13.8<br>","siteName: Portland - SE Lafayette<br>monitorID: 410510080_01<br>elevation: 75<br>pm25: 17.5<br>","siteName: Beaverton - Highland Park School<br>monitorID: 410670111_01<br>elevation: 58<br>pm25: 8.3<br>","siteName: Vancouver-NE 84th Ave<br>monitorID: 530110024_01<br>elevation: 54<br>pm25: 20<br>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#7E0023","#8F3F97","#FF0000","#FF7E00","#FFFF00","#00E400"],"labels":["Hazardous","Very Unhealthy","Unhealthy","USG","Moderate","Good"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"unknown","title":"AQI Level","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[45.39916,45.64336],"lng":[-122.8159,-122.58737]}},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Leaflet map of rasterized monitors</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="../reference/raster_leaflet.html">raster_leaflet</a></span>(</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">  <span class="dt">raster =</span> Portland_rasterBrick,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  <span class="dt">index =</span> <span class="dv">32</span>,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">  <span class="dt">palette =</span> <span class="st">"aqi"</span>,</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">  <span class="dt">direction =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">)</a></code></pre></div>
<div id="htmlwidget-e409acef320589481d13" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e409acef320589481d13">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addRasterImage","args":["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAASCAYAAAC0EpUuAAAAQElEQVQ4jWP8//8/A7UBE9VNHDV0WBvKSDANkmHof0YaGEoYkGwo41MKvI9L839pwt5nHJC8T4x3MfSMllJUBwD3OhLlvx3cFQAAAABJRU5ErkJggg==",[[45.929998027961,-123.090001914933],[45.2099982577132,-122.250001740037]],0.6,null,null,null]},{"method":"addLegend","args":[{"colors":["#00E400","#FFFF00","#FF7E00","#FF0000","#8F3F97","#7E0023"],"labels":["-Inf &ndash; 12.0","12.0 &ndash; 35.5","35.5 &ndash; 55.5","55.5 &ndash; 150.5","150.5 &ndash; 250.5","250.5 &ndash; Inf"],"na_color":null,"na_label":"NA","opacity":0.5,"position":"topright","type":"bin","title":"PM2.5","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[45.2099982577132,45.929998027961],"lng":[-123.090001914933,-122.250001740037]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>The <em>AirFireModeling</em> package is intended to simplify downloading, analyzing, and comparing spatio-temporal BlueSky Model and monitor data. The package focuses on harnessingn the <em>raster</em> package for memory efficient exploration and analysis while providing a simple and consistent syntax.</p>
<p><strong><em>Mazama Science</em></strong></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#preparation">Preparation</a></li>
      <li><a href="#loading-bluesky-models">Loading BlueSky models</a></li>
      <li><a href="#raster-data-types">Raster data types</a></li>
      <li><a href="#maps">Maps</a></li>
      <li><a href="#working-with-monitoring-data">Working with monitoring data</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonathan Callahan, Hans Martin, Rohan Aras, Zach Dingels, Jimin Kim, Jon Hagg, Rex Thompson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
