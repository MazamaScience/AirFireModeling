<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lazy Evaluation • AirFireModeling</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Lazy Evaluation">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">AirFireModeling</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/AirFireModeling_Introduction.html">Introduction to AirFireModeling</a>
    </li>
    <li>
      <a href="../../articles/articles/Aggregation_by_Polygon.html">Aggregation by Polygon</a>
    </li>
    <li>
      <a href="../../articles/articles/Lazy_Evaluation.html">Lazy Evaluation</a>
    </li>
    <li>
      <a href="../../articles/articles/Receptor_Analysis.html">Receptor Analysis</a>
    </li>
    <li>
      <a href="../../articles/articles/Smoke_by_County.html">Smoke by County</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Lazy Evaluation</h1>
                        <h4 class="author">Mazama Science</h4>
            
            <h4 class="date">2020-07-09</h4>
      
      
      <div class="hidden name"><code>Lazy_Evaluation.Rmd</code></div>

    </div>

    
    
<p>This vignette will introduce the concept of ‘lazy evaluation’ and how it is useful for working with the large data sets handled by the AirFireModeling package.</p>
<div id="lazy-evaluation" class="section level2">
<h2 class="hasAnchor">
<a href="#lazy-evaluation" class="anchor"></a>Lazy Evaluation</h2>
<p>‘Lazy evaluation’ is an evaluation strategy in programming that is centered on procrastination. When an expression is encountered in a program using this strategy, the calculation of that expression is postponed until its value is required elsewhere (which might never happen). Lazy evaluation is typically found in functional programming languages like Haskell and R, and contrasts the ‘eager evaluation’ strategy common to imperative languages such as C++, Java, and Python.</p>
<p>To demonstrate the difference, consider the following code:</p>
<pre><code>1   x &lt;- 1 + 2
2   print(x)</code></pre>
<p>An ‘eager’ approach:</p>
<ol style="list-style-type: decimal">
<li>Calculate <code>1 + 2</code> to get 3 and assign 3 to <code>x</code>.</li>
<li>Retrieve the value of <code>x</code> and print it out.</li>
</ol>
<p>A ‘lazy’ approach:</p>
<ol style="list-style-type: decimal">
<li>Remember the expression <code>1 + 2</code> assigned to <code>x</code>.</li>
<li>The value of <code>x</code> is needed here! Now calculate its expression, assign the result to <code>x</code>, and then print the value of <code>x</code>.</li>
</ol>
<p>While the difference is negligible in this example, the benefits of lazy evaluation can become apparent when expressions become large and complex. The lazy strategy can greatly improve performance and reduce a program’s memory footprint by creating values only when they are actually needed. However, this can come at the cost of increased overhead and the loss of control.</p>
<p><a href="https://en.wikipedia.org/wiki/Lazy_evaluation">Wikipedia</a></p>
<p><a href="https://colinfay.me/lazyeval/">About Lazy Evaluation</a></p>
<p><a href="https://medium.com/javascript-in-plain-english/lazy-evaluation-in-a-strict-language-a8f938870a7a">Lazy Evaluation in a Strict Language</a></p>
</div>
<div id="netcdf" class="section level2">
<h2 class="hasAnchor">
<a href="#netcdf" class="anchor"></a>NetCDF</h2>
<p>Lazy evaluation is useful when it comes to working with netCDF data. NetCDF (network Common Data Format) is a file format designed around the creation, access, and sharing of large array-based data sets. It is commonly used in geospatial applications like meteorology, climatology, and oceanography, but is also useful in many other fields of science.</p>
<p>NetCDF data is:</p>
<ul>
<li><p>Self-describing, meaning that it includes information about the data it contains such as its grid layout and the names and units of its variables.</p></li>
<li><p>Portable, so that a netCDF file created on one operating system can be transferred and readable to a machine running a different operating system.</p></li>
<li><p>Scalable, such that a small subset of a large netCDF file can be accessed efficiently without reading the entire contents of the file.</p></li>
</ul>
<p>Efficiency is a primary concern when working with netCDF files since they often contain enormous amounts of information and can therefore take time to load and large portions of RAM to store. It is important then to read/write <em>only</em> what is necessary <em>only</em> when required. The <code>ncdf4</code> package in R achieves this efficiency by providing an interface for a netCDF file which loads as little data as possible until queried for specific variables.</p>
<p>To illustrate this, <code>ncdf4</code> supplies the <code>nc_open</code> function which “opens” a netCDF file for reading/writing. Its output is an object which contains just the file metadata, describing its contents without loading its actual readings. These can be accessed after opening the file through a call to <code>ncvar_get</code> requesting a desired variable.</p>
<p><a href="https://cran.r-project.org/web/packages/ncdf4">ncdf4 package</a></p>
</div>
<div id="raster" class="section level2">
<h2 class="hasAnchor">
<a href="#raster" class="anchor"></a>Raster</h2>
<p>The <strong>raster</strong> package provides <em>Raster</em> objects which can be used to represent the gridded information stored in netCDF files. Many useful functions are provided for sampling, visualizing, and generally managing spatial data either as a single instantaneous <em>RasterLayer</em> or over time by combining many layers into a <em>RasterBrick</em>.</p>
<p><a href="https://cran.r-project.org/web/packages/raster">raster package</a></p>
<div id="lazy-evaluation-in-rasters" class="section level3">
<h3 class="hasAnchor">
<a href="#lazy-evaluation-in-rasters" class="anchor"></a>Lazy Evaluation in Rasters</h3>
<p>Rasters also follow the lazy evaluation strategy – putting off loading their actual cell values until specifically requested, as explained in the <strong>raster</strong> package documentation:</p>
<blockquote>
<p>In many cases, <em>e.g.</em> when a RasterLayer is created from a file, it does (initially) not contain any cell (pixel) values in memory (RAM), it only has the parameters that describe the RasterLayer. You can access cell-values with getValues(), extract() and related functions.</p>
</blockquote>
<p>Let’s demonstrate this by using the <strong>AirFireModeling</strong> package to check out the <em>RasterBrick</em> produced by a BlueSky model run:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(AirFireModeling)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="../../reference/setModelDataDir.html">setModelDataDir</a></span>(<span class="st">"~/Data/BlueSky"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># Load the BlueSky model run file for October 9th, 2019</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">modelRun &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/bluesky_load.html">bluesky_load</a></span>(<span class="st">"PNW-4km"</span>, <span class="dv">2019100900</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">modelRun</a></code></pre></div>
<pre><code>## class      : RasterBrick 
## dimensions : 264, 514, 135696, 71  (nrow, ncol, ncell, nlayers)
## resolution : 0.04000001, 0.03999999  (x, y)
## extent     : -128.57, -108.01, 39.73, 50.29  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
## source     : /Users/jonathan/Data/BlueSky/PNW-4km_2019100900_v2.nc 
## names      : X1570582800, X1570586400, X1570590000, X1570593600, X1570597200, X1570600800, X1570604400, X1570608000, X1570611600, X1570615200, X1570618800, X1570622400, X1570626000, X1570629600, X1570633200, ... 
## z-value    : 1570582800, 1570834800 (min, max)
## varname    : PM25 
## level      : 1</code></pre>
<p><code>modelRun</code> is an S4 object of class <code>RasterBrick</code>. We can access the individual <em>RasterLayers</em> of the <em>RasterBrick</em> by referencing layer names:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(modelRun<span class="op">$</span>X1570582800)</a></code></pre></div>
<pre><code>## class      : RasterLayer 
## band       : 1  (of  71  bands)
## dimensions : 264, 514, 135696  (nrow, ncol, ncell)
## resolution : 0.04000001, 0.03999999  (x, y)
## extent     : -128.57, -108.01, 39.73, 50.29  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0 
## source     : /Users/jonathan/Data/BlueSky/PNW-4km_2019100900_v2.nc 
## names      : X1570582800 
## z-value    : 1570582800 
## zvar       : PM25 
## level      : 1</code></pre>
<p>Let’s inspect the memory used by these <em>RasterLayers</em> before and after they are used in expressions.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">raster &lt;-<span class="st"> </span>modelRun<span class="op">$</span>X1570582800</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">editedRaster &lt;-<span class="st"> </span>modelRun<span class="op">$</span>X1570582800 <span class="op">+</span><span class="st"> </span><span class="dv">0</span> <span class="co"># Cell values must be loaded now</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">pryr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pryr/man/object_size.html">object_size</a></span>(raster)</a></code></pre></div>
<pre><code>## 12 kB</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">pryr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pryr/man/object_size.html">object_size</a></span>(editedRaster)</a></code></pre></div>
<pre><code>## 1.1 MB</code></pre>
<p>Even though these two <em>RasterLayers</em> describe the same data, the edited raster is much larger because it needs to load in the cell readings while the original raster still only needs to hold its metadata. Lazy evaluation is working to do the bare minimum!</p>
</div>
</div>
<div id="airfiremodeling" class="section level2">
<h2 class="hasAnchor">
<a href="#airfiremodeling" class="anchor"></a>AirFireModeling</h2>
<p>The <strong>AirFireModeling</strong> package uses the <em>RasterBricks</em> produced by BlueSky model runs for reading and visualizing PM 2.5 data. These model run files typically range from a few dozen megabytes to several hundred, so it is important to consider how lazy evaluation factors into working with this data efficiently.</p>
<div id="lazy-evaluation-in-airfiremodeling" class="section level3">
<h3 class="hasAnchor">
<a href="#lazy-evaluation-in-airfiremodeling" class="anchor"></a>Lazy Evaluation in AirFireModeling</h3>
<p>Like we have seen for the individual <em>RasterLayers</em>, model run objects also use lazy evaluation to load in readings only when absolutely necessary:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">editedModelRun &lt;-<span class="st"> </span>modelRun <span class="op">+</span><span class="st"> </span><span class="dv">0</span> <span class="co"># Cell values must be loaded now</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(modelRun<span class="op">@</span>data<span class="op">@</span>values)</a></code></pre></div>
<pre><code>## [1] 0 0</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(editedModelRun<span class="op">@</span>data<span class="op">@</span>values)</a></code></pre></div>
<pre><code>## [1] 135696     71</code></pre>
<p>The actual dimensions of the data value matrix is 0x0 until the values are used. You can also see this lazy evaluation when comparing the memory usage of a model run holding just metadata and a model run after its values are loaded:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">pryr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pryr/man/object_size.html">object_size</a></span>(modelRun)</a></code></pre></div>
<pre><code>## 19.1 kB</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">pryr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pryr/man/object_size.html">object_size</a></span>(editedModelRun)</a></code></pre></div>
<pre><code>## 77.1 MB</code></pre>
</div>
<div id="optimization" class="section level3">
<h3 class="hasAnchor">
<a href="#optimization" class="anchor"></a>Optimization</h3>
<p>Whenever possible, it is best to restrict the area of a requested model in order to avoid loading lots of unnecessary data. The <code><a href="../../reference/bluesky_load.html">bluesky_load()</a></code> function allows you to perform this optimization by setting the latitude and longitude extents of your request through the <code>xlim</code> and <code>ylim</code> parameters.</p>
<p>Let’s compare an area-optimized raster with an unoptimized one:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">unoptimizedModelRun &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/bluesky_load.html">bluesky_load</a></span>(<span class="st">"PNW-4km"</span>, <span class="dv">2019100900</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">optimizedModelRun   &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/bluesky_load.html">bluesky_load</a></span>(<span class="st">"PNW-4km"</span>, <span class="dv">2019100900</span>,</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">                                    <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">123</span>, <span class="dv">-122</span>),</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">                                    <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">45</span>, <span class="dv">46</span>))</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"></a>
<a class="sourceLine" id="cb18-6" data-line-number="6">pryr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pryr/man/object_size.html">object_size</a></span>(unoptimizedModelRun)</a></code></pre></div>
<pre><code>## 19.1 kB</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">pryr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pryr/man/object_size.html">object_size</a></span>(optimizedModelRun)</a></code></pre></div>
<pre><code>## 403 kB</code></pre>
<p>We can see that there is a big difference when initially loading optimized and unoptimized rasters. The unoptimized one is lazy evaluated so that its initial memory usage is very small, but the optimized version immediately loads everything. However, once they are put in use it is clear that the optimized raster is quite a bit smaller overall:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">a &lt;-<span class="st"> </span>unoptimizedModelRun <span class="op">*</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2">b &lt;-<span class="st"> </span>optimizedModelRun <span class="op">*</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4">pryr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pryr/man/object_size.html">object_size</a></span>(a)</a></code></pre></div>
<pre><code>## 77.1 MB</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">pryr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/pryr/man/object_size.html">object_size</a></span>(b)</a></code></pre></div>
<pre><code>## 402 kB</code></pre>
</div>
<div id="optimization-example" class="section level3">
<h3 class="hasAnchor">
<a href="#optimization-example" class="anchor"></a>Optimization Example</h3>
<p>Let’s see this optimization in action by plotting the PM 2.5 levels around Portland, Oregon. We can request the data in just this area by defining a rectangular boundary around it with longitudes and latitudes:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="co"># MazamaSpatialUtils are needed to determine timezone and state</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(MazamaSpatialUtils)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">PWFSLSmoke<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/PWFSLSmoke/man/initializeMazamaSpatialUtils.html">initializeMazamaSpatialUtils</a></span>()</a>
<a class="sourceLine" id="cb26-4" data-line-number="4"></a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="co"># Load model data</span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6">rasterList &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/raster_load.html">raster_load</a></span>(</a>
<a class="sourceLine" id="cb26-7" data-line-number="7">  <span class="dt">modelName =</span> <span class="st">"PNW-1.33km"</span>,</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">  <span class="dt">modelRun =</span> <span class="dv">2019100900</span>,</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">  <span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">123</span>, <span class="dv">-122</span>),</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">  <span class="dt">ylim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">45</span>, <span class="dv">46</span>)</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">)</a>
<a class="sourceLine" id="cb26-12" data-line-number="12"></a>
<a class="sourceLine" id="cb26-13" data-line-number="13">model_Portland &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/raster_toMonitor.html">raster_toMonitor</a></span>(</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">  rasterList,</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">  <span class="dt">longitude =</span> <span class="fl">-122.68</span>,</a>
<a class="sourceLine" id="cb26-16" data-line-number="16">  <span class="dt">latitude =</span> <span class="fl">45.52</span>,</a>
<a class="sourceLine" id="cb26-17" data-line-number="17">  <span class="dt">radius =</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb26-18" data-line-number="18">)</a>
<a class="sourceLine" id="cb26-19" data-line-number="19"></a>
<a class="sourceLine" id="cb26-20" data-line-number="20">PWFSLSmoke<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/PWFSLSmoke/man/monitor_timeseriesPlot.html">monitor_timeseriesPlot</a></span>(</a>
<a class="sourceLine" id="cb26-21" data-line-number="21">  model_Portland[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb26-22" data-line-number="22">  <span class="dt">type =</span> <span class="st">'l'</span>,</a>
<a class="sourceLine" id="cb26-23" data-line-number="23">  <span class="dt">col =</span> <span class="st">'salmon'</span>,</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">  <span class="dt">hourInterval =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">  <span class="dt">shadedNight =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb26-26" data-line-number="26">)</a>
<a class="sourceLine" id="cb26-27" data-line-number="27"><span class="kw"><a href="https://rdrr.io/r/graphics/title.html">title</a></span>(<span class="st">"Portland PM2.5 values, BlueSky Run: 2019100900"</span>)</a></code></pre></div>
<p><img src="Lazy_Evaluation_files/figure-html/portland_optimization_example-1.png" width="672"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#lazy-evaluation">Lazy Evaluation</a></li>
      <li><a href="#netcdf">NetCDF</a></li>
      <li><a href="#raster">Raster</a></li>
      <li><a href="#airfiremodeling">AirFireModeling</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonathan Callahan, Tate Brasel, Hans Martin, Rohan Aras, Zach Dingels, Jimin Kim, Jon Hagg, Rex Thompson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
