<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Aggregate multiple BlueSky model runs into a single RasterBrick object — raster_aggregate • AirFireModeling</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Aggregate multiple BlueSky model runs into a single RasterBrick object — raster_aggregate" />
<meta property="og:description" content="Combines multiple Bluesky model runs to produce a single
RasterBrick object. Users can set the first run, the last run, the hourly
spacing between model runs, and the chunk index for the section of each
model's time axis to be used." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AirFireModeling</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.14</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/AirFireModeling_Introduction.html">Introduction to AirFireModeling</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate multiple BlueSky model runs into a single RasterBrick object</h1>
    
    <div class="hidden name"><code>raster_aggregate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Combines multiple Bluesky model runs to produce a single
RasterBrick object. Users can set the first run, the last run, the hourly
spacing between model runs, and the chunk index for the section of each
model's time axis to be used.</p>
    </div>

    <pre class="usage"><span class='fu'>raster_aggregate</span>(
  <span class='kw'>model</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>firstModelRun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>lastModelRun</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>modelType</span> <span class='kw'>=</span> <span class='st'>"forecast"</span>,
  <span class='kw'>baseUrl</span> <span class='kw'>=</span> <span class='st'>"https://haze.airfire.org/bluesky-daily/output/standard"</span>,
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>clean</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>spacing</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>chunk</span> <span class='kw'>=</span> <span class='fl'>1</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>Model identifier(s).</p></td>
    </tr>
    <tr>
      <th>firstModelRun</th>
      <td><p>Initialization datestamp of first model run as "YYYYmmddHH".</p></td>
    </tr>
    <tr>
      <th>lastModelRun</th>
      <td><p>Initialization datestamp of last model run as "YYYYmmddHH".</p></td>
    </tr>
    <tr>
      <th>modelType</th>
      <td><p>Subdirectory path containing BlueSky output, i.e. 'forcast'.</p></td>
    </tr>
    <tr>
      <th>baseUrl</th>
      <td><p>Base URL for BlueSky output.</p></td>
    </tr>
    <tr>
      <th>xlim</th>
      <td><p>A vector of coordinate longitude bounds.</p></td>
    </tr>
    <tr>
      <th>ylim</th>
      <td><p>A vector of coordinate latitude bounds.</p></td>
    </tr>
    <tr>
      <th>clean</th>
      <td><p>Logical specifying removal of original model data after conversion
to "v2" format.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical to display messages.</p></td>
    </tr>
    <tr>
      <th>spacing</th>
      <td><p>Time difference (hrs) between each model run -- overrides
default values.</p></td>
    </tr>
    <tr>
      <th>chunk</th>
      <td><p>The portion of the time (of width = 'spacing') to be chosen from
each model run. If <code>spacing = 12</code>, then <code>chunk = 1</code> corresponds to
the first 12 hours of the each model run, <code>chunk = 2</code> corresponds to the
next 12 hours of each model run, and so on. See the note below for further
explanation.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A RasterBrick object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Setting <code>chunk = 1</code> results in grabbing the initial portion of each model
run. Setting chunk to higher numbers utilizes times further out in the the
forecast of each model run implying more uncertainty.</p>
    <h2 class="hasAnchor" id="chunks"><a class="anchor" href="#chunks"></a>Chunks</h2>

    

<p>Suppose a model is run every 12 hours. For this model <code>spacing = 12</code>.
In this case, <code>chunk = 1</code> means we select the first 12 hours from each
model run -- i.e. we work with the model data from as close to initialization
as possible. Setting <code>chunk = 2</code> means we select the next 12 hours
(i.e. hours 13-24) from each model run. Setting <code>chunk = 3</code> means we
select hours 25-48 from each model run and so on.</p>
<p>Chunking can be used to account for any inaccuracies in the data that may
be due to poor initial conditions. For example, older models only predicted
impacts from existing sources, and did not take into account any smoke that
may have already been present at the time of initialization. In this case,
setting <code>chunk = 2</code> may produce better results.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>AirFireModeling</span>)
<span class='fu'><a href='setModelDataDir.html'>setModelDataDir</a></span>(<span class='st'>'~/Data/BlueSky'</span>)

<span class='co'># Kincade fire</span>
<span class='no'>rasterBrick</span> <span class='kw'>&lt;-</span> <span class='fu'>raster_aggregate</span>(
  <span class='kw'>model</span> <span class='kw'>=</span> <span class='st'>"CANSAC-4km"</span>,
  <span class='kw'>firstModelRun</span> <span class='kw'>=</span> <span class='fl'>2019102700</span>,
  <span class='kw'>lastModelRun</span> <span class='kw'>=</span> <span class='fl'>2019103100</span>,
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>124</span>, -<span class='fl'>121.5</span>),
  <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>37.5</span>, <span class='fl'>39</span>)
)

<span class='fu'><a href='raster_facet.html'>raster_facet</a></span>(
  <span class='no'>rasterBrick</span>,
  <span class='kw'>title</span> <span class='kw'>=</span> <span class='st'>"Kincade Fire -- 2019102700 through 2019103100"</span>,
  <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>12</span>,
  <span class='kw'>palette</span> <span class='kw'>=</span> <span class='st'>'Spectral'</span>,
  <span class='kw'>col_county</span> <span class='kw'>=</span> <span class='st'>'gray95'</span>,
  <span class='kw'>direction</span> <span class='kw'>=</span> -<span class='fl'>1</span>,
  <span class='kw'>breaks</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>Inf</span>, <span class='fl'>0</span>, <span class='fl'>12</span>, <span class='fl'>35</span>, <span class='fl'>55</span>, <span class='fl'>150</span>, <span class='fl'>250</span>, <span class='fl'>350</span>, <span class='fl'>Inf</span>)
)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#chunks">Chunks</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jonathan Callahan, Hans Martin, Rohan Aras, Zach Dingels, Jimin Kim, Jon Hagg, Rex Thompson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


